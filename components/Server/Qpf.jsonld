{
  "@context": [
    {
      "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",

      "lsdc": "http://linkedsoftwaredependencies.org/vocabulary/components#",
      "Module": {
        "@id": "lsdc:Module"
      },
      "ComponentConstructable": {
        "@id": "lsdc:ComponentConstructable"
      },
      "ComponentConstructableAbstract": {
        "@id": "lsdc:ComponentConstructableAbstract"
      },
      "ComponentComponentInstance": {
        "@id": "lsdc:ComponentInstance"
      },
      "components": {
        "@id": "lsdc:hasComponent"
      },
      "parameters": {
        "@id": "lsdc:hasParameter"
      },
      "constructorMapping": {
        "@id": "lsdc:constructorMapping",
        "@container": "@list"
      },
      "parameterUnique": {
        "@id": "lsdc:parameterUnique"
      },
      "hasDefaultValue": {
        "@id": "lsdc:hasDefaultValue"
      },
      "hasFixedValue": {
        "@id": "lsdc:hasFixedValue"
      },

      "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
      "comment": {
        "@id": "rdfs:comment",
        "@type": "@id"
      },
      "extends": {
        "@id": "rdfs:subClassOf",
        "@type": "@id"
      },
      "range": {
        "@id": "rdfs:range",
        "@type": "@id"
      },

      "owl": "http://www.w3.org/2002/07/owl#",
      "import": {
        "@id": "owl:imports"
      },
      "InheritanceValue": {
        "@id": "owl:Restriction"
      },
      "inheritValues": {
        "@id": "rdfs:subClassOf",
        "@type": "@id"
      },
      "onParameter": {
        "@id": "owl:onProperty",
        "@type": "@id"
      },
      "from": {
        "@id": "owl:allValuesFrom",
        "@type": "@id"
      },

      "npm": "http://example.org/npm#",
      "requireName": {
        "@id": "npm:requireName"
      },
      "requireElement": {
        "@id": "npm:requireElement"
      },

      "om": "http://linkedsoftwaredependencies.org/vocabulary/object-mapping#",
      "ObjectMap": {
        "@id": "om:ObjectMap"
      },
      "ArrayMap": {
        "@id": "om:ArrayMap"
      },
      "fields": {
        "@id": "om:field",
        "@type": "om:ObjectMapEntry"
      },
      "elements": {
        "@id": "om:element",
        "@type": "om:ArrayMapEntry"
      },
      "dynamicEntries": {
        "@id": "om:dynamicEntries",
        "@type": "@id"
      },
      "keyRaw": {
        "@id": "om:fieldName"
      },
      "key": {
        "@id": "om:fieldName",
        "@type": "@id"
      },
      "value": {
        "@id": "om:fieldValue",
        "@type": "@id"
      }
    },
    {
      "npmd": "http://linkedsoftwaredependencies.org/bundles/npm/",
      "ldfs": "npmd:ldf-server/",
      "rdfa": "http://www.w3.org/ns/rdfa#"
    }
  ],
  "@id": "npmd:@ldf/server",
  "components": [
    {
      "@id": "ldfs:Server/Qpf",
      "@type": "ComponentConstructable",
      "requireElement": "LinkedDataFragmentsServerWorker",
      "comment": "LinkedDataFragmentsServer is an HTTP server that provides access to Linked Data Fragments",
      "parameters": [
        {
          "@id": "rdfs:label",
          "comment": "The server name",
          "range": "xsd:string",
          "parameterUnique": true,
          "hasDefaultValue": "Linked Data Fragments server"
        },
        {
          "@id": "ldfs:baseURL",
          "comment": "The base URL path for the server",
          "range": "xsd:string",
          "parameterUnique": true,
          "hasDefaultValue": "/"
        },
        {
          "@id": "ldfs:urlData",
          "comment": "The UrlData helper object",
          "range": { "@id": "ldfs:UrlData" },
          "parameterUnique": true,
          "hasDefaultValue": { "@id": "ldfs:defaultUrlData", "@type": "ldfs:UrlData" }
        },
        {
          "@id": "ldfs:port",
          "comment": "The port the server will bind with",
          "range": "xsd:integer",
          "parameterUnique": true,
          "hasDefaultValue": 3000
        },
        {
          "@id": "ldfs:workers",
          "comment": "The number of server instances that will be started",
          "range": "xsd:integer",
          "parameterUnique": true,
          "hasDefaultValue": 1
        },
        {
          "@id": "ldfs:protocol",
          "comment": "Explicitly set the protocol, default will be the protocol derived from the baseURL",
          "range": "xsd:string",
          "parameterUnique": true
        },
        {
          "@id": "ldfs:datasource",
          "comment": "Datasource that will be exposed by the server",
          "range": { "@id": "ldfs:Datasource" },
          "hasFixedValue": [
            {
              "@id": "ldfs:defaultIndexDatasource",
              "@type": "ldfs:Datasource/Index",
              "rdfs:label": "dataset index",
              "ldfs:Datasource/path": "",
              "ldfs:Datasource/hidden": true
            }
          ]
        },
        {
          "@id": "ldfs:prefix",
          "comment": "The URI prefixes that will be used",
          "hasDefaultValue": [
            { "rdfa:prefix": "rdf",         "rdfa:uri": "http://www.w3.org/1999/02/22-rdf-syntax-ns#" },
            { "rdfa:prefix": "rdfs",        "rdfa:uri": "http://www.w3.org/2000/01/rdf-schema#" },
            { "rdfa:prefix": "owl",         "rdfa:uri": "http://www.w3.org/2002/07/owl#" },
            { "rdfa:prefix": "xsd",         "rdfa:uri": "http://www.w3.org/2001/XMLSchema#" },
            { "rdfa:prefix": "hydra",       "rdfa:uri": "http://www.w3.org/ns/hydra/core#" },
            { "rdfa:prefix": "void",        "rdfa:uri": "http://rdfs.org/ns/void#" },
            { "rdfa:prefix": "sd",          "rdfa:uri": "http://www.w3.org/TR/sparql11-service-description/#" }
          ]
        },
        {
          "@id": "ldfs:router",
          "comment": "A router for the server",
          "range": { "@id": "ldfs:Router" },
          "hasDefaultValue": [
            { "@id": "ldfs:defaultRouterDatasource",  "@type": "ldfs:Router/Datasource" },
            { "@id": "ldfs:defaultRouterQuadPattern", "@type": "ldfs:Router/QuadPattern" },
            { "@id": "ldfs:defaultRouterPage",        "@type": "ldfs:Router/Page" }
          ]
        },
        {
          "@id": "ldfs:controller",
          "comment": "A controller for the server",
          "range": { "@id": "ldfs:Controller" },
          "hasDefaultValue": [
            { "@id": "ldfs:defaultSummaryController",     "@type": "ldfs:Controller/Summary" },
            { "@id": "ldfs:defaultTimegateController",    "@type": "ldfs:Controller/Timegate" },
            {
              "@id": "ldfs:defaultQuadPatternFragmentsController",
              "@type": "ldfs:Controller/QuadPatternFragments",
              "ldfs:qpfControllerExtension": { "@type": "ldfs:ControllerExtension/Memento" }
            },
            { "@id": "ldfs:defaultAssetsController",      "@type": "ldfs:Controller/Assets" },
            { "@id": "ldfs:defaultDereferenceController", "@type": "ldfs:Controller/Dereference" },
            { "@id": "ldfs:defaultNotFoundController",    "@type": "ldfs:Controller/NotFound" }
          ]
        },
        {
          "@id": "ldfs:viewCollection",
          "comment": "A ViewCollection provides access to content-negotiated views by name",
          "range": { "@id": "ldfs:View/Collection" },
          "parameterUnique": true,
          "hasDefaultValue": { "@id": "ldfs:defaultViewCollection", "@type": "ldfs:View/Collection" }
        },
        {
          "@id": "ldfs:view",
          "comment": "A view for the server",
          "range": { "@id": "ldfs:View" },
          "hasDefaultValue": [
            { "@id": "ldfs:defaultViewHtmlError", "@type": "ldfs:View/Html/Error" },
            { "@id": "ldfs:defaultViewRdfError",  "@type": "ldfs:View/Rdf/Error"  },
            { "@id": "ldfs:defaultViewHtmlForbidden", "@type": "ldfs:View/Html/Forbidden" },
            { "@id": "ldfs:defaultViewHtmlNotFound", "@type": "ldfs:View/Html/NotFound" },
            { "@id": "ldfs:defaultViewRdfNotFound",  "@type": "ldfs:View/Rdf/NotFound"  },
            {
              "@id": "ldfs:defaultViewHtmlQpf",
              "@type": "ldfs:View/Html/Qpf",
              "ldfs:View/extension": [
                { "@type": "ldfs:ViewExtension/Html/Qpf/Memento" },
                { "@type": "ldfs:ViewExtension/Html/Qpf/Summary" }
              ]
            },
            {
              "@id": "ldfs:defaultViewRdfQpf",
              "@type": "ldfs:View/Rdf/Qpf",
              "ldfs:View/extension": [
                { "@type": "ldfs:ViewExtension/Rdf/Qpf/Summary" }
              ]
            },
            { "@id": "ldfs:defaultViewRdfSummary",  "@type": "ldfs:View/Rdf/Summary"  }
          ]
        },
        {
          "@id": "ldfs:responseHeader",
          "comment": "Configuration for the server response data",
          "range": { "@id": "ldfs:Response" },
          "hasDefaultValue": [
            { "ldfs:headerName": "Access-Control-Allow-Origin",   "ldfs:headerValue": "*" },
            { "ldfs:headerName": "Access-Control-Allow-Headers",  "ldfs:headerValue": "Accept-Datetime" },
            { "ldfs:headerName": "Access-Control-Expose-Headers", "ldfs:headerValue": "Content-Location,Link,Memento-Datetime" }
          ]
        },
        {
          "@id": "ldfs:sslKey",
          "comment": "Path to an SSL key",
          "range": "xsd:string",
          "parameterUnique": true,
          "hasDefaultValue": "config/certs/localhost-server.key"
        },
        {
          "@id": "ldfs:sslCert",
          "comment": "Path to an SSL certificate",
          "range": "xsd:string",
          "parameterUnique": true,
          "hasDefaultValue": "config/certs/localhost-server.crt"
        },
        {
          "@id": "ldfs:sslCa",
          "comment": "Path to an SSL certificate authority",
          "range": "xsd:string",
          "parameterUnique": true,
          "hasDefaultValue": [ "config/certs/localhost-ca.crt" ]
        },
        {
          "@id": "ldfs:logging",
          "comment": "If the server should perform logging",
          "range": "xsd:boolean",
          "parameterUnique": true,
          "hasDefaultValue": false
        },
        {
          "@id": "ldfs:loggingFile",
          "comment": "Path to a log file",
          "range": "xsd:string",
          "parameterUnique": true,
          "hasDefaultValue": "access.log"
        },
        {
          "@id": "ldfs:assetsPath",
          "comment": "Path matching for assets",
          "range": "xsd:string",
          "parameterUnique": true
        },
        {
          "@id": "ldfs:assetsDir",
          "comment": "Path to a directory where assets can be found",
          "range": "xsd:string",
          "parameterUnique": true
        }
      ],
      "constructorMapping": [
        {
          "fields": [
            {
              "keyRaw": "title",
              "value": "rdfs:label"
            },
            {
              "@id": "ldfs:urlDataFieldMapping",
              "keyRaw": "urlData",
              "value": "ldfs:urlData"
            },
            {
              "keyRaw": "port",
              "value": "ldfs:port"
            },
            {
              "keyRaw": "protocol",
              "value": "ldfs:protocol"
            },
            {
              "keyRaw": "workers",
              "value": "ldfs:workers"
            },
            {
              "@id": "ldfs:datasourcesFieldMapping",
              "keyRaw": "datasources",
              "value": {
                "fields": [
                  {
                    "dynamicEntries": "ldfs:datasource",
                    "key": "ldfs:Datasource/path",
                    "value": "rdf:object"
                  }
                ]
              }
            },
            {
              "keyRaw": "dereference",
              "value": "ldfs:dereference"
            },
            {
              "@id": "ldfs:prefixFieldMapping",
              "keyRaw": "prefixes",
              "value": {
                "fields": [
                  {
                    "dynamicEntries": "ldfs:prefix",
                    "key": "rdfa:prefix",
                    "value": "rdfa:uri"
                  }
                ]
              }
            },
            {
              "@id": "ldfs:routersField",
              "keyRaw": "routers",
              "value": "ldfs:router"
            },
            {
              "keyRaw": "controllers",
              "value": "ldfs:controller"
            },
            {
              "@id": "ldfs:viewCollectionFieldMapping",
              "keyRaw": "views",
              "value": "ldfs:viewCollection"
            },
            {
              "@id": "ldfs:viewsFieldMapping",
              "keyRaw": "viewsRaw",
              "value": "ldfs:view"
            },
            {
              "keyRaw": "response",
              "value": {
                "@type": "Object",
                "fields": [
                  {
                    "keyRaw": "header",
                    "value": {
                      "fields": [
                        {
                          "dynamicEntries": "ldfs:responseHeader",
                          "key": "ldfs:headerName",
                          "value": "ldfs:headerValue"
                        }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "keyRaw": "ssl",
              "value": {
                "fields": [
                  {
                    "keyRaw": "keys",
                    "value": {
                      "fields": [
                        {
                          "keyRaw": "key",
                          "value": "ldfs:sslKey"
                        },
                        {
                          "keyRaw": "cert",
                          "value": "ldfs:sslCert"
                        },
                        {
                          "keyRaw": "ca",
                          "value": "ldfs:sslCa"
                        }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "keyRaw": "logging",
              "value": {
                "fields": [
                  {
                    "keyRaw": "enabled",
                    "value": "ldfs:logging"
                  },
                  {
                    "keyRaw": "file",
                    "value": "ldfs:loggingFile"
                  }
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
